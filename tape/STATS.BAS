10	DEF* FNRETURN.LOAD$ &
\	CPU%=PEEK(PEEK(156%)+2%) &
\	TICKS=PEEK(CPU%) &
\	IF CPU%=0% THEN &
	FNRETURN.LOAD$='Load not available' &
\	GOTO 32767 &

20	GOSUB 20000 &
\	FNRETURN.LOAD$='Load : '+NUM1$(USER/UPTIME*100%)+'%' &
\	GOTO 32767 &

13000	DEF* FNV(Q%) &
	! &
	&
	!	F N V ( A D D R E S S % ) &
	&
		! &
		! FNV(Q%)	RETURN A PEEKED VALUE &

13020	Q=PEEK(Q%) &
	\ Q=Q+65536.0 IF Q < 0.0 &
	\ FNV=PEEK(Q%+2%)*65536.0+Q &
		! GET THE VALUE &

13030	FNEND &
	&
13200	DEF* FNC(Q%) &
	! &
	&
	!	F N C ( A D D R E S S % ) &
	&
		! &
		! FNC(Q%)	RETURN CPU DATUM &

13220	Q=FNV(CPU%+Q%)\ FNC=Q-EXEC(Q%/2%)\ EXEC(Q%/2%)=Q &

13230	FNEND &

20000	! GET THE INFO. &

20010	UPTIME		= FNC(2%)		! TIME FOR THIS PROBE &
	\ UPSECS	= UPTIME/TICKS		! PROBE TIME IN SECONDS &
	\ MIN.SMALL%	= PEEK(CPU%+6%)		! MINIMUM SMALL BUFFERS &
	\ SYSTEM	= FNC(8%)		! MONITOR CHARGED TIME &
	\ LOST		= FNC(12%)		! LOST TIME &
	\ UNCHARGED	= FNC(16%)		! MONITOR UNCHARGED TIME &
	\ NULL		= FNC(20%)		! IDLE TIME &
	\ USER		= UPTIME - SYSTEM - LOST - UNCHARGED - NULL &
						! USEFUL WORK &

20020	RETURN &

32767	FNEND &

