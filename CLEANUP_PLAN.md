# Repository Cleanup Plan

This document tracks files that are required vs candidates for deletion.

## REQUIRED FILES

### Core Configuration
```
Dockerfile              # Main Docker build
docker-compose.yml      # Local development
fly.toml                # Fly.io deployment
.gitignore
```

### Docker Runtime (docker/)
```
docker/entrypoint.sh
docker/pdp11.ini
docker/nginx.conf
docker/game_connect.exp
docker/game_session.sh
docker/admin_connect.sh
docker/verify_ready.exp
docker/restart_service.sh
docker/web/             # Entire directory (HTML, CSS, JS)
```

### Source Code (src/)
```
src/ADVENT.B2S          # Main program
src/ADVENT.ODL          # Overlay descriptor
src/ADVINI.SUB          # Initialization
src/ADVOUT.SUB          # Output handling
src/ADVNOR.SUB          # Normal commands
src/ADVCMD.SUB          # Command parser
src/ADVODD.SUB          # Odd commands
src/ADVMSG.SUB          # Messages
src/ADVBYE.SUB          # Exit handling
src/ADVSHT.SUB          # Short commands
src/ADVNPC.SUB          # NPCs
src/ADVPUZ.SUB          # Puzzles
src/ADVDSP.SUB          # Display
src/ADVFND.SUB          # Find
src/ADVTDY.SUB          # Tidy
src/NEWADV.RNO          # Documentation (1987)
```

### Original Data (data/)
```
data/ADVENT.DTA         # Room data (1024000 bytes)
data/ADVENT.MON         # Monster data
data/ADVENT.CHR         # Character data
data/BOARD.NTC          # Noticeboard
data/roomfil.fil        # Original room file
data/monfil.fil         # Original monster file
```

### Build Scripts (scripts/)
```
scripts/create_tape.py
scripts/create_advent_tape.py
scripts/migrate_data.py
scripts/setup_advent.py
```

### Generated Data (build/data/)
```
build/data/ADVENT.DTA
build/data/ADVENT.MON
build/data/ADVENT.CHR
build/data/BOARD.NTC
```

### Disk Images
```
simh/Disks/rsts0.dsk    # Boot disk with ADVENT.TSK
simh/Disks/rsts1.dsk    # Game disk
```

### Documentation
```
README.md               # Main readme
STATUS.md               # Feature status
RESURRECTION.md         # Story of resurrection
PROVENANCE.md           # File history
TECHNICAL.md            # Technical details
CONTINUATION.md         # Development guide
NEWADV.md               # 1987 dungeon writer's guide
claude.md               # Claude development notes
```

## CANDIDATES FOR DELETION (~300+ files)

### Root Directory Scripts (~200 files)
All .py and .exp files in root are OLD test/debug scripts:
```bash
# These can be deleted:
rm -f *.py *.exp 2>/dev/null
```

Specific patterns:
- `boot_*.py`, `boot_*.exp` - Boot test scripts
- `check_*.py`, `check_*.exp` - Check scripts
- `debug_*.py` - Debug scripts
- `create_*.py` - Create scripts (NOT in scripts/)
- `compile_*.py` - Compile test scripts
- `test_*.py`, `test_*.exp` - Test scripts
- `run_*.py` - Run scripts
- `transfer_*.py` - Transfer scripts
- `verify_*.py` - Verify scripts

### Old/Duplicate Disk Images
```bash
# Archive directory
rm -rf build/disks/archive/

# Timestamped backups (keep only rsts0.dsk, rsts1.dsk)
rm -f build/disks/*-working-*.dsk
rm -f build/disks/*-test.dsk
rm -f build/disks/kermit.dsk
rm -f build/disks/rsts2-data.dsk
rm -f build/disks/*.bak

# Duplicate disks in simh/Disks (keep only rsts0.dsk, rsts1.dsk)
rm -f simh/Disks/rsts_*.dsk
rm -f simh/Disks/test_*.dsk
rm -f simh/Disks/*_backup*.dsk
rm -f simh/Disks/*.before_patch
```

### Old Tapes
```bash
# Keep only advent_source.tap (generated by docker build)
rm -f build/tapes/advent.tap
rm -f build/tapes/advent_full.tap
rm -f build/tapes/advent_aligned.tap
rm -f build/tapes/transfer.tap
```

### Old Expect Scripts
```bash
rm -rf scripts/expect/
```

### Old Docker Files
```bash
rm -f Dockerfile.ra72-test
rm -rf simh/Disks/ra72/
rm -f simh/pdp11_ra72.ini
```

### Development Notes (optional)
```bash
# Can keep or delete based on preference
rm -f TKB_BUILD_RESEARCH.md
rm -f CHAIN_ALTERNATIVE.md
```

### Backup Source Files
```bash
rm -f src/*.bak
rm -f build/source/*.SUB
rm -f build/source/*.B2S
```

### Misc
```bash
rm -f check.dsk
rm -rf docs/
rm -rf simh/tapes/
```

## CLEANUP COMMANDS

Run these commands to clean up the repository:

```bash
# 1. Delete root scripts (backup first!)
mkdir -p .archive
mv *.py *.exp .archive/ 2>/dev/null

# 2. Clean disk images
rm -rf build/disks/archive/
rm -f build/disks/*-working-*.dsk
rm -f build/disks/*-test.dsk
rm -f build/disks/*.bak
rm -f build/disks/kermit.dsk
rm -f build/disks/rsts2-data.dsk

# 3. Clean simh/Disks (keep only rsts0.dsk, rsts1.dsk)
rm -f simh/Disks/rsts_*.dsk
rm -f simh/Disks/test_*.dsk
rm -f simh/Disks/*_backup*.dsk
rm -f simh/Disks/*.before_patch
rm -rf simh/Disks/ra72/

# 4. Clean old tapes
rm -f build/tapes/advent.tap
rm -f build/tapes/advent_full.tap
rm -f build/tapes/advent_aligned.tap
rm -f build/tapes/transfer.tap

# 5. Clean old expect scripts
rm -rf scripts/expect/

# 6. Clean old Docker files
rm -f Dockerfile.ra72-test
rm -f simh/pdp11_ra72.ini

# 7. Clean backup files
rm -f src/*.bak
rm -rf build/source/

# 8. Clean misc
rm -f check.dsk
rm -rf docs/
rm -rf simh/tapes/
```

## VERIFICATION

After cleanup, verify the system still works:

```bash
# Rebuild and test
docker-compose down
docker-compose up -d --build

# Wait for boot (~2 min)
sleep 120

# Check status
curl http://localhost:8088/api/boot-status

# Test web interface
open http://localhost:8088
```

## ESTIMATED SIZE SAVINGS

Before cleanup: ~500+ files, ~400MB
After cleanup: ~50 files, ~60MB

The main space savings come from removing duplicate/backup disk images (each is ~27MB).
