; SIMH PDP-11 Configuration for RSTS/E V10.1 + Advent MUD
; Auto-boots without requiring console interaction

; Set CPU type - PDP-11/44 with 4MB memory
set cpu 11/44
set cpu 4M

; Throttle to realistic PDP-11/44 speed (~1.5 MIPS)
; This prevents terminal I/O timing issues
set throttle 1500K

; Disable unused devices
set rk disable
set rl disable
set tm disable
set rx disable
set rp disable
; set ts disable  ; Enabled for tape testing
set tq disable
set ptr disable

; TS11 tape drive for file transfer testing
set ts enable
attach ts /opt/advent/tapes/transfer.tap

; Configure RK07 disk drives (HK controller)
set hk enable
set hk0 RK07
set hk1 RK07

; Attach disk images
attach hk0 /opt/advent/disks/rsts0.dsk
attach hk1 /opt/advent/disks/rsts1.dsk

; Configure terminal multiplexer for game players
set dz enable
set dz lines=8
attach dz 2323

; Dedicated line for file transfer (line 7 -> port 2324)
attach dz line=7,connect=2324

; Console on TCP (buffered = don't wait for connection before boot)
set console telnet=2322
set console telnet=buffered

; Remote console for SIMH control (allows WRU/Ctrl+E to work)
set remote telnet=2325

; Auto-answer boot prompts
; These expect commands handle the RSTS/E startup sequence
expect "Today's date?" send "1-JAN-92\r"; continue
expect "Current time?" send "12:00\r"; continue
expect "Start timesharing?" send "Y\r"; continue
expect "Proceed with system startup?" send "Y\r"; continue
expect "Option:" send "\r"; continue

; Boot from HK0
boot hk0
